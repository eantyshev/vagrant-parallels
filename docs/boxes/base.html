<!DOCTYPE html> <html> <head> <meta charset=utf-8> <title> Creating a Base Box - Vagrant Parallels Provider Documentation</title> <meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> <link href="../../stylesheets/bootstrap-2bdef9a2.css" media=screen rel=stylesheet /> <link href="../../stylesheets/vagrant-parallels-b4fc2db9.css" media=screen rel=stylesheet /> <script src="../../javascripts/jquery-08c11650.js"></script> <script src="../../javascripts/modernizr-84c0465a.js"></script> <script src="../../javascripts/bootstrap.min-98cc7a22.js"></script> <script src="../../javascripts/backstretch-3d1212ad.js"></script> <script src="../../javascripts/vagrant-parallels-03aae2a8.js"></script> <link href='//fonts.googleapis.com/css?family=Inconsolata' rel=stylesheet> </head> <body> <div class=wrapper> <nav class=docs> <div class=container> <a class=vagrant-docs-logo href="/vagrant-parallels/docs/">Vagrant Parallels Documentation</a> <ul class=pull-right> <li><a href="https://docs.vagrantup.com">Vagrant Docs</a></li> <li><a href="https://github.com/Parallels/vagrant-parallels">Github</a></li> </ul> </div> </nav> <div class="page docs docs-home"> <div class=container> <div class="sidebar span4"> <aside class=sidebar-nav> <div class="toggle hidden-desktop"> <div class="open-close open"></div> <a href="#">Contents</a> </div> <ul class=unstyled> <li><a href="/vagrant-parallels/docs/">Overview</a></li> <li><a href="/vagrant-parallels/docs/installation/index.html">Installation</a></li> <li><a href="/vagrant-parallels/docs/usage.html">Usage</a></li> <li><a href="/vagrant-parallels/docs/getting-started.html">Getting Started</a></li> <li><a href="/vagrant-parallels/docs/share.html">Vagrant Share</a></li> <li><a href="/vagrant-parallels/docs/boxes/index.html">Boxes</a></li> <ul class="sub unstyled"> <li class=current><a href="/vagrant-parallels/docs/boxes/base.html">Creating a Base Box</a></li> <li><a href="/vagrant-parallels/docs/boxes/veewee.html">Using Veewee</a></li> </ul> <li><a href="/vagrant-parallels/docs/configuration.html">Configuration</a></li> <li><a href="/vagrant-parallels/docs/networking/index.html">Networking</a></li> <li><a href="/vagrant-parallels/docs/contacts.html">Contacts</a></li> </ul> </aside> </div> <div class="page-contents span9"> <div class=page-background></div> <div class=row> <div class="span8 offset1"> <h1>Creating a Base Box</h1> <div class="alert alert-warn"> <p> <strong>Warning: Advanced Topic!</strong> Creating a base box can be a time consuming and tedious process, and is not recommended for new Vagrant users. If you're just getting started with Vagrant, we recommend trying to find <a href="/vagrant-parallels/docs/boxes/index.html">existing base boxes</a> to use first. </p> </div> <p>This page documents the box format so that you can create your own base boxes manually.</p> <p>Prior to reading this page, please understand the <a href="//docs.vagrantup.com/v2/boxes/format.html">basics of the Vagrant box file format</a>.</p> <h2>Contents</h2> <p>A Parallels base box is a compressed archive of the necessary contents of a Parallels &quot;pvm&quot; file. Here is an example of what is contained in such a box:</p> <pre><code>$ tree
.
├── Vagrantfile
├── box.pvm
│   ├── NVRAM.dat
│   ├── VmInfo.pvi
│   ├── config.pvs
│   └── harddisk.hdd
│       └── ...
└── metadata.json
</code></pre> <p><code>config.pvs</code> and <code>.hdd</code> files are strictly required for a Parallels virtual machine.</p> <p>There is also the &quot;metadata.json&quot; file used by Vagrant itself. This file contains nothing but the defaults which are documented on the <a href="//docs.vagrantup.com/v2/boxes/format.html">box format</a> page.</p> <h2>Installed Software</h2> <p>Base boxes for the Parallels provider should have the following software installed, as a bare minimum:</p> <ul> <li><p>SSH server with key-based authentication setup. If you want the box to work with default Vagrant settings, the SSH user must be set to accept the <a href="https://github.com/mitchellh/vagrant/blob/master/keys/vagrant.pub">insecure keypair</a> that ships with Vagrant.</p></li> <li><p><a href="//download.parallels.com/desktop/v9/ga/docs/en_US/ Parallels%20Desktop%20User's%20Guide/32791.htm">Parallels Tools</a> so that things such as shared folders can function. There are many other benefits to installing the tools, such as networking configuration and device mapping.</p></li> </ul> <h2>Optimizing box size</h2> <p>Prior to packaging up a box, you should shrink the hard drives as much as possible. This can be done with <code>prl_disk_tool</code>:</p> <pre><code>$ prl_disk_tool compact /path/to/harddisk.hdd
</code></pre> <h2>Packaging</h2> <p>Remove any extraneous files from the &quot;pvm&quot; folder and package it. Be sure to compress the tar with gzip (done below in a single command) since Parallels hard disks are not compressed by default.</p> <pre><code>$ cd /path/to/my/box.pvm/..
$ tar cvzf custom.box ./box.pvm ./Vagrantfile ./metadata.json
</code></pre> </div> </div> </div> </div> </div> <footer> <div class=container> <div class=row> <ul class="unstyled logos"> <a href="//www.vagrantup.com/downloads.html"> <li class=vagrant-logo-monochrome> <p>Vagrant</p> </li> </a> <a href="//www.parallels.com/downloads/desktop/"> <li class=pd-logo-monochrome> <p>Parallels Desktop</p> </li> </a> </ul> </div> <div class=row> <h6 class=legal> &#169; 2014 Parallels IP Holdings GmbH. </h6> </div> </div> </footer> </div> </body> </html>