<!DOCTYPE html> <html> <head> <meta charset=utf-8> <title> Using veewee - Vagrant Parallels Provider Documentation</title> <meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> <link href="../../stylesheets/bootstrap-2bdef9a2.css" media=screen rel=stylesheet /> <link href="../../stylesheets/vagrant-parallels-b4fc2db9.css" media=screen rel=stylesheet /> <script src="../../javascripts/jquery-08c11650.js"></script> <script src="../../javascripts/modernizr-84c0465a.js"></script> <script src="../../javascripts/bootstrap.min-98cc7a22.js"></script> <script src="../../javascripts/backstretch-3d1212ad.js"></script> <script src="../../javascripts/vagrant-parallels-03aae2a8.js"></script> <link href='//fonts.googleapis.com/css?family=Inconsolata' rel=stylesheet> </head> <body> <div class=wrapper> <nav class=docs> <div class=container> <a class=vagrant-docs-logo href="/vagrant-parallels/docs/">Vagrant Parallels Documentation</a> <ul class=pull-right> <li><a href="https://docs.vagrantup.com">Vagrant Docs</a></li> <li><a href="https://github.com/Parallels/vagrant-parallels">Github</a></li> </ul> </div> </nav> <div class="page docs docs-home"> <div class=container> <div class="sidebar span4"> <aside class=sidebar-nav> <div class="toggle hidden-desktop"> <div class="open-close open"></div> <a href="#">Contents</a> </div> <ul class=unstyled> <li><a href="/vagrant-parallels/docs/">Overview</a></li> <li><a href="/vagrant-parallels/docs/installation/index.html">Installation</a></li> <li><a href="/vagrant-parallels/docs/usage.html">Usage</a></li> <li><a href="/vagrant-parallels/docs/getting-started.html">Getting Started</a></li> <li><a href="/vagrant-parallels/docs/share.html">Vagrant Share</a></li> <li><a href="/vagrant-parallels/docs/boxes/index.html">Boxes</a></li> <ul class="sub unstyled"> <li><a href="/vagrant-parallels/docs/boxes/base.html">Creating a Base Box</a></li> <li class=current><a href="/vagrant-parallels/docs/boxes/veewee.html">Using Veewee</a></li> </ul> <li><a href="/vagrant-parallels/docs/configuration.html">Configuration</a></li> <li><a href="/vagrant-parallels/docs/networking/index.html">Networking</a></li> <li><a href="/vagrant-parallels/docs/contacts.html">Contacts</a></li> </ul> </aside> </div> <div class="page-contents span9"> <div class=page-background></div> <div class=row> <div class="span8 offset1"> <h1>Using Veewee</h1> <div class="alert alert-warn"> <p> <strong>Warning: Advanced Topic!</strong> If you're not familiar with Veewee, you should read the <a href="https://github.com/jedi4ever/veewee/blob/master/README.md"> Veewee documentation</a> first. </p> </div> <p>Veewee must be properly installed in order to build a new base box using one of the existing veewee templates. If you haven&#39;t installed it yet, please refer to the <a href="https://github.com/jedi4ever/veewee/blob/master/doc/installation.md">Veewee Installation</a> instructions.</p> <h2>Parallels Virtualization SDK</h2> <p>Veewee requires the &#39;prlsdkapi&#39; Python module from the Parallels Virtualization SDK to interact with Parallels Desktop and virtual machines. To use Veewee with the Parallels provider you need to install this SDK.</p> <p>The Parallels Virtualization SDK can be downloaded from this location: <a href="//www.parallels.com/downloads/desktop/">http://www.parallels.com/downloads/desktop/</a></p> <p>Click the &quot;Parallels Virtualization SDK 9 for Mac&quot; link and then save the &quot;.dmg&quot; file to your Mac. Run the file to install the SDK.</p> <h2>Preparing a definition</h2> <p>List available Veewee templates, choose what you want to use and create a definition:</p> <pre><code>$ veewee parallels templates
$ veewee parallels define &#39;my_centos&#39; &#39;CentOS-6.5-x86_64-minimal&#39;
</code></pre> <p>Since most of the default templates are not ready to be used with the Parallels provider, you need to customize the definition manually.</p> <p>Navigate to the definition folder and create a <code>parallels.sh</code> script with the following content:</p> <pre><code># vi ./definition/my_centos/parallels.sh

# Install the Parallels Tools
PARALLELS_TOOLS_ISO=prl-tools-lin.iso
mkdir -p /media/cdrom
mount -o loop $PARALLELS_TOOLS_ISO /media/cdrom
/media/cdrom/install --install-unattended-with-deps --progress
umount /media/cdrom
</code></pre> <p>Open the <code>definition.rb</code> file for editing, find the &#39;:postinstall_files&#39; array and add the &quot;parallels.sh&quot; string to it. It should now look like this:</p> <pre><code> #vi ./definition/my_centos/definition.rb

...
  :postinstall_files =&gt; [
     &quot;base.sh&quot;,
     &quot;ruby.sh&quot;,
     &quot;chef.sh&quot;,
     &quot;puppet.sh&quot;,
     &quot;vagrant.sh&quot;,
     #&quot;virtualbox.sh&quot;,
     &quot;parallels.sh&quot;,
     &quot;cleanup.sh&quot;,
  ],
...
</code></pre> <p>Please observe the following important rules:</p> <ul> <li>You can insert <code>&quot;parallels.sh&quot;</code> on any position of this array, but it&#39;s necessary to place it between <code>&quot;base.sh&quot;</code> and <code>&quot;cleanup.sh&quot;</code></li> <li>You also have to comment (or delete) strings like &quot;vbox.sh&quot; or &quot;virtualbox.sh&quot;, to prevent VirtualBox customization.</li> </ul> <h2>Building a VM Image</h2> <p>After customizing the definition you can start building a vm image:</p> <pre><code>$ veewee parallels build &#39;my_centos&#39;
</code></pre> <p>This action can take a long time to complete because it involves downloading the ISO image, installing the OS, and configuring it after the installation.</p> <h2>Exporting</h2> <pre><code>$ veewee parallels export &#39;my_centos&#39;
</code></pre> <p>The virtual machine will be shut down, exported, and packed in the <code>my_centos.box</code> file inside the current directory. When it&#39;s done, you can use it as any other box for the Parallels provider.</p> </div> </div> </div> </div> </div> <footer> <div class=container> <div class=row> <ul class="unstyled logos"> <a href="//www.vagrantup.com/downloads.html"> <li class=vagrant-logo-monochrome> <p>Vagrant</p> </li> </a> <a href="//www.parallels.com/downloads/desktop/"> <li class=pd-logo-monochrome> <p>Parallels Desktop</p> </li> </a> </ul> </div> <div class=row> <h6 class=legal> &#169; 2014 Parallels IP Holdings GmbH. </h6> </div> </div> </footer> </div> </body> </html>